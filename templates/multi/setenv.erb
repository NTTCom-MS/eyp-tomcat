#
# puppet managed file
#
<% if defined?(@java_home) -%>
export JAVA_HOME="<%= @java_home %>"
<% end -%>
export CATALINA_PID=/var/run/<%= @instancename %>.pid
export CATALINA_HOME=<%= scope.lookupvar('tomcat::catalina_home') %>
export CATALINA_BASE=<%= @catalina_base %>
<% if @server -%>
export CATALINA_OPTS="$CATALINA_OPTS -server"
<% end -%>
export CATALINA_OPTS="$CATALINA_OPTS -Djava.awt.headless=<%= @java_awt_headless %>"
<% if defined?(@jvm_error_file) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:ErrorFile=<%= @jvm_error_file %>"
<% end -%>
<% if defined?(@java_library_path) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Djava.library.path=<%= @java_library_path %>"
<% end -%>
<% if defined?(@xmx) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Xmx<%= @xmx %>"
<% end -%>
<% if defined?(@xms) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Xms<%= @xms %>"
<% end -%>
<% if defined?(@xmn) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Xmn<%= @xmn %>"
<% end -%>
<% if defined?(@xmns) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Xmns<%= @xmns %>"
<% end -%>
<% if defined?(@xmnx) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Xmnx<%= @xmnx %>"
<% end -%>
<% if defined?(@permsize) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:PermSize=<%= @permsize %>"
<% end -%>
<% if defined?(@maxpermsize) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:MaxPermSize=<%= @maxpermsize %>"
<% end -%>
<% if defined?(@heapdump_oom_dir) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
export CATALINA_OPTS="$CATALINA_OPTS -XX:HeapDumpPath=<%= @heapdump_oom_dir %>"
<% end -%>
<% if defined?(@file_encoding) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Dfile.encoding=<%= @file_encoding %>"
<% end -%>
<% if defined?(@sun_jnu_encoding) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Dsun.jnu.encoding=<%= @sun_jnu_encoding %>"
<% end -%>
<% if defined?(@file_encoding_pkg) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Dfile.encoding.pkg=<%= @file_encoding_pkg %>"
<% end -%>
<% if defined?(@java_security_egd) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Djava.security.egd=file:<%= @java_security_egd %>"
<% end -%>
<% if defined?(@http_max_connections) -%>
export CATALINA_OPTS="$CATALINA_OPTS -Dhttp.maxConnections=<%= @http_max_connections %>"
<% end -%>
## OTHERS
<% if defined?(@max_tenuring_threshold) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:MaxTenuringThreshold=<%= @max_tenuring_threshold %>"
<% end -%>
<% if defined?(@survivor_ratio) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:SurvivorRatio=<%= @survivor_ratio %>"
<% end -%>
<% if @unlock_diagnostic_vm_options -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+UnlockDiagnosticVMOptions"
<% end -%>
<% if @always_pre_touch -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+AlwaysPreTouch"
<% end -%>
<% if @agressive_opts -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+AggressiveOpts"
<% end -%>
<% if @use_biased_locking -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+UseBiasedLocking"
<% end -%>
<% if defined?(@target_survivor_ratio) -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:TargetSurvivorRatio=<%= @target_survivor_ratio %>"
<% end -%>
<% if @unlock_commercial_features -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+UnlockCommercialFeatures"
<% end -%>
<% if @flight_recorder -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+FlightRecorder"
<% end -%>
<% if @debug_non_safepoints -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+DebugNonSafepoints"
<% end -%>
<% if @print_string_table_statistics -%>
export CATALINA_OPTS="$CATALINA_OPTS -XX:+PrintStringTableStatistics"
<% end -%>
<% if @catalina_disable_http_keepalive -%>
export CATALINA_OPTS="$CATALINA_OPTS -Dhttp.keepalive=<%= @catalina_disable_http_keepalive %>"
<% end -%>
